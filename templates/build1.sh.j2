#!/bin/bash

function ensure_ip_free
{
	echo -c "Will ensure $1 is not already in use.."
	ping -c 1 -t 2 $1
	if [ $? -eq 0 ]
	then
		echo "IP $1 IS ALIVE. Will not continue!!"
		exit 1
	fi
	echo "OK"
}

echo "----------- Test if IP are free for cluster {{m.cluster.id}}"
# YAB_INCLUDE[build1-ensureip]_BEGIN - Do not modify from this point >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

# YAB_INCLUDE[build1-ensureip]_END - You may modify below this <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

echo "----------- Will build VM for cluster {{m.cluster.id}}"
# YAB_INCLUDE[build1-createvm]_BEGIN - Do not modify from this point >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

# YAB_INCLUDE[build1-createvm]_END - You may modify below this <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


echo "............ Wait for VM creation"
wait


# YAB_INCLUDE[build1-ddisks]_BEGIN - Do not modify from this point >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

# YAB_INCLUDE[build1-ddisks]_END - You may modify below this <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

